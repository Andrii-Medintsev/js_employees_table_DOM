{"version":3,"sources":["scripts/main.js"],"names":["document","body","insertAdjacentHTML","previousTitle","form","querySelector","inputs","querySelectorAll","table","tbody","container","createElement","sorterByTitleName","columnNumber","columnTitle","rowsArray","compare","rows","toLowerCase","rowA","rowB","cells","innerHTML","salaryConverter","sort","append","reverse","salary","slice","replace","splittedArray","split","splice","length","join","pushNotification","title","description","type","contains","remove","notification","classList","add","setAttribute","style","top","offsetHeight","parseInt","gap","right","toUpperCase","setTimeout","capitalizer","string","trim","filter","item","map","word","inputValidation","inputName","inputValue","ageOutOfRange","valueIsEmpty","properNameLength","display","flexShrink","position","margin","prepend","addEventListener","e","tr","target","closest","i","th","tagName","cellIndex","textContent","preventDefault","formElements","elements","input","outline","name","value","focus","office","age","reset","userSelect","td","cellContent","currentColumnTitle","toLocaleLowerCase","onblur","replaceWith","enterHandler","ev","key"],"mappings":"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","file":"main.cbfb3ee2.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\ndocument.body.insertAdjacentHTML('beforeend', `\n  <form class=\"new-employee-form\">\n    <label>Name:\n      <input name=\"name\" type=\"text\" data-qa=\"name\" required>\n    </label>\n\n    <label>Position:\n      <input name=\"position\" type=\"text\" data-qa=\"position\" required>\n    </label>\n\n    <label>Office:\n      <select data-qa=\"office\" name=\"office\" required>\n        <option>Tokyo</option>;\n        <option>Singapore</option>\n        <option>London</option>\n        <option>New York</option>\n        <option>Edinburgh</option>\n        <option>San Francisco</option>\n      </select>\n    </label>\n\n    <label>Age:\n      <input name=\"age\" type=\"number\" data-qa=\"age\" required>\n    </label>\n\n    <label>Salary:\n      <input name=\"salary\" type=\"number\" data-qa=\"salary\" required>\n    </label>\n\n    <button class=\"saveButton\" type=\"submit\">Save to table</button>\n    </form>\n`);\n\nconst form = document.querySelector('.new-employee-form');\nconst inputs = form.querySelectorAll('input');\nconst table = document.querySelector('table');\nconst tbody = table.querySelector('tbody');\n\nconst container = document.createElement('div');\n\ncontainer.classList.add('container');\ncontainer.style.display = 'flex';\ncontainer.style.flexShrink = '0';\ncontainer.style.gap = '20px';\ncontainer.style.position = 'relative';\nform.style.margin = 0;\n\ndocument.body.prepend(container);\ncontainer.append(table);\ncontainer.append(form);\n\nlet previousTitle;\n\nfunction sorterByTitleName(columnNumber, columnTitle) {\n  const rowsArray = [...tbody.rows];\n\n  let compare;\n\n  switch (columnTitle.toLowerCase()) {\n    case 'age':\n      compare = function(rowA, rowB) {\n        return +rowA.cells[columnNumber].innerHTML\n        - +rowB.cells[columnNumber].innerHTML;\n      };\n      break;\n\n    case 'salary':\n      compare = function(rowA, rowB) {\n        return salaryConverter(rowA.cells[columnNumber].innerHTML)\n        - salaryConverter(rowB.cells[columnNumber].innerHTML);\n      };\n      break;\n\n    default:\n      compare = function(rowA, rowB) {\n        return rowA.cells[columnNumber].innerHTML\n        > rowB.cells[columnNumber].innerHTML ? 1 : -1;\n      };\n      break;\n  }\n\n  rowsArray.sort(compare);\n\n  if (!previousTitle || previousTitle !== columnTitle) {\n    tbody.append(...rowsArray);\n    previousTitle = columnTitle;\n  } else {\n    tbody.append(...rowsArray.reverse());\n    previousTitle = null;\n  }\n};\n\nfunction salaryConverter(salary) {\n  if (!salary) {\n    return '';\n  }\n\n  if (salary[0] === '$') {\n    return salary.slice(1).replace(',', '.') * 1000;\n  }\n\n  const splittedArray = salary.split('');\n\n  splittedArray.splice(salary.length - 3, 0, ',');\n\n  return '$' + splittedArray.join('');\n};\n\nfunction pushNotification(title, description, type) {\n  if (container.contains(document.querySelector('.notification'))) {\n    document.querySelector('.notification').remove();\n  }\n\n  const notification = document.createElement('div');\n\n  notification.classList.add('notification', type);\n  notification.setAttribute('data-qa', 'notification');\n\n  notification.style.top\n    = form.offsetHeight + parseInt(container.style.gap) + 'px';\n  notification.style.right = 0;\n\n  notification.insertAdjacentHTML('afterbegin', `\n    <h1>${title[0].toUpperCase() + title.slice(1).toLowerCase()}</h1>\n    <p>${description}</p>\n  `);\n\n  container.append(notification);\n\n  setTimeout(() => {\n    notification.remove();\n  }, 3000);\n};\n\nfunction capitalizer(string) {\n  if (+salaryConverter(string)) {\n    return string;\n  }\n\n  return string\n    .trim()\n    .split(' ')\n    .filter(item => item.length > 0)\n    .map(word => word[0].toUpperCase() + word.slice(1))\n    .join(' ');\n}\n\ntable.addEventListener('click', (e) => {\n  const tr = e.target.closest('tr');\n\n  if (!tbody.contains(tr)) {\n    return;\n  }\n\n  if (tr.classList.contains('active')) {\n    tr.classList.remove('active');\n\n    return;\n  }\n\n  for (let i = 0; i < tbody.rows.length; i++) {\n    tbody.rows[i].classList.remove('active');\n  }\n\n  tr.classList.add('active');\n});\n\ntable.addEventListener('click', (e) => {\n  const th = e.target.closest('th');\n\n  if (e.target.tagName !== 'TH') {\n    return;\n  }\n\n  sorterByTitleName(th.cellIndex, th.textContent);\n});\n\ndocument.querySelector('.saveButton').addEventListener('click', (e) => {\n  e.preventDefault();\n\n  const formElements = form.elements;\n\n  for (const input of inputs) {\n    input.addEventListener('blur', () => {\n      input.style.outline = '';\n    });\n\n    if (!inputValidation(input.name, input.value)) {\n      input.style.outline = '1px solid red';\n      input.focus();\n\n      return;\n    }\n  }\n\n  tbody.insertAdjacentHTML('beforeend', `\n    <tr>\n      <td>${capitalizer(formElements.name.value)}</td>\n      <td>${capitalizer(formElements.position.value)}</td>\n      <td>${formElements.office.value}</td>\n      <td>${formElements.age.value}</td>\n      <td>${salaryConverter(formElements.salary.value)}</td>\n    </tr>\n  `);\n\n  pushNotification('Success', 'Employee was added', 'success');\n\n  form.reset();\n});\n\ntbody.addEventListener('dblclick', (e) => {\n  table.style.userSelect = 'none';\n\n  const td = e.target.closest('td');\n\n  if (e.target.tagName !== 'TD') {\n    return;\n  }\n\n  const cellContent = td.textContent;\n  const currentColumnTitle\n    = table.rows[0].cells[td.cellIndex].textContent.toLocaleLowerCase();\n  const input = document.createElement('input');\n\n  input.classList.add('cell-input');\n  input.setAttribute('type', 'text');\n\n  input.value = cellContent;\n\n  if (currentColumnTitle === 'salary') {\n    input.value = salaryConverter(cellContent);\n  }\n\n  td.textContent = '';\n  td.append(input);\n  input.focus();\n\n  input.onblur = () => {\n    if (!input.value || input.value.trim().length === 0) {\n      input.replaceWith(cellContent);\n    }\n\n    if (inputValidation(currentColumnTitle, input.value)\n    ) {\n      if (currentColumnTitle === 'salary') {\n        input.replaceWith(salaryConverter(input.value));\n      }\n\n      input.replaceWith(capitalizer(input.value));\n\n      pushNotification(\n        capitalizer(currentColumnTitle), 'Successfully changed', 'success'\n      );\n    }\n  };\n\n  input.addEventListener('keypress', enterHandler);\n\n  function enterHandler(ev) {\n    if (ev.key === 'Enter' && !input.value) {\n      input.replaceWith(cellContent);\n    }\n\n    if (ev.key === 'Enter'\n      && inputValidation(currentColumnTitle, input.value)\n    ) {\n      if (currentColumnTitle === 'salary') {\n        input.replaceWith(salaryConverter(input.value));\n      }\n\n      input.replaceWith(capitalizer(input.value));\n\n      pushNotification(\n        capitalizer(currentColumnTitle), 'Successfully changed', 'success'\n      );\n    }\n  }\n});\n\nfunction inputValidation(inputName, inputValue) {\n  const ageOutOfRange\n    = inputName === 'age' && (inputValue < 18 || inputValue > 90);\n  const valueIsEmpty = !inputValue || inputValue.trim().length === 0;\n  const properNameLength\n  = inputName === 'name' && inputValue.trim().length < 4;\n\n  if (valueIsEmpty) {\n    pushNotification(\n      capitalizer(inputName), ' Cannot be empty', 'error'\n    );\n\n    return false;\n  }\n\n  if (properNameLength) {\n    pushNotification(\n      capitalizer(inputName), 'Should have minimum 4 letters', 'error'\n    );\n\n    return false;\n  }\n\n  if (ageOutOfRange) {\n    pushNotification(\n      capitalizer(inputName), 'Should be between 18 and 90', 'error'\n    );\n\n    return false;\n  }\n\n  if (inputName === 'salary' && inputValue < 0) {\n    pushNotification(capitalizer(inputName), 'Cannot be negative', 'error');\n\n    return false;\n  }\n\n  return true;\n}\n"]}